---
const { position = "top-left" } = Astro.props;
const buttonId = `backButton-${position}`;
---

<button
  id={buttonId}
  class={`fixed ${position === 'bottom-right' ? 'bottom-5 right-5' : 'top-20 left-4'} flex items-center bg-secondary-warm hover:bg-primary-dark text-white py-2 px-4 rounded-lg shadow-lg z-[9999] transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-secondary-cool`}
  aria-label="Retour à la page précédente"
>
  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
  </svg>
  <span class="text-sm font-medium">Retour</span>
</button>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const backButton = document.getElementById("backButton-" + ("${position}" || "top-left"));
    if (!backButton) return;
    if (window.location.pathname === '/' || window.location.pathname === '/index.html') {
      backButton.style.display = 'none';
      return;
    }
    backButton.addEventListener('click', () => {
      window.history.back();
    });
    setTimeout(() => {
      backButton.classList.add('translate-x-0', 'opacity-100');
      backButton.classList.remove('opacity-0', '-translate-x-4');
    }, 300);
  });
</script>

<style>
  [id^="backButton"] {
    transform: translateX(-1rem);
    opacity: 0;
    transition: all 0.3s ease-out;
    z-index: 9999;
  }
  @media (max-width: 640px) {
    [id^="backButton"] {
      top: unset;
      left: unset;
      bottom: 1.25rem;
      right: 1.25rem;
      padding: 0.5rem;
    }
    [id^="backButton"] span {
      display: none;
    }
    [id^="backButton"] svg {
      margin-right: 0;
    }
  }
</style> 